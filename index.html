<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>冰糖狐狸的歌单</title>
    <style>
        /* 定义字体 */
        @font-face {
            font-family: 'msyh.ttf'; /* 字体名称 */
            src: RockcandyFox.github.io/fonts
/msyh.ttf('fonts/msyh.ttf') format('ttf'), /* 字体文件路径 */
                 RockcandyFox.github.io/fonts
/msyh.ttf('fonts/msyh.ttf') format('ttf');
            font-weight: normal;
            font-style: normal;
        }

         body {
            background-image: url('background.jpg'); /* 背景图片路径 */
            background-size: cover; /* 图片覆盖整个页面 */
            background-position: center; /* 图片居中显示 */
            background-repeat: no-repeat; /* 防止图片重复 */
            background-attachment: fixed; /* 背景图片固定，不随页面滚动 */
            font-family: 'msyh.ttf', sans-serif; /* 使用自定义字体 */
            color: #596c63; /* 文字颜色 */
        }
        .content {
            padding: 20px;
            filter: blur(2px); /* 设置模糊效果 */
            background-color: rgba(179, 201, 198, 0.8); /* 表格背景透明度 */
        }
        th, td {
            border: 1px solid #ddd;
            padding: 10px;
            text-align: left;
        }
        th {
            background-color: rgba(179, 201, 198, 0.8); /* 表头背景透明度 */
            font-weight: bold;
        }
        input[type="text"], select {
            width: 100%;
            padding: 5px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        td {
            background-color: rgba(179, 201, 198, 0.6); /* 设置单元格背景透明度 */
        }
    </style>
</head>
<body>

<div class="container">
    <h1>冰糖狐狸的歌单</h1>

    <table id="readonlyTable">
        <thead>
            <tr>
                <th>歌曲名称 <input type="text" id="searchCol1" oninput="filterTable('search')" placeholder="搜索..."></th>
                <th>歌手 
                    <select id="filterCol2" onchange="filterTable('filter', 1)">
                        <option value="">全部</option>
                    </select>
                </th>
                <th>语言 
                    <select id="filterCol3" onchange="filterTable('filter', 2)">
                        <option value="">全部</option>
                    </select>
                </th>
                <th>风格 
                    <select id="filterCol4" onchange="filterTable('filter', 3)">
                        <option value="">全部</option>
                    </select>
                </th>
                <th>价格
                    <select id="filterCol5" onchange="filterTable('filter', 4)">
                        <option value="">全部</option>
                    </select>
                </th>
                <th>板块 
                    <select id="filterCol6" onchange="filterTable('filter', 5)">
                        <option value="">全部</option>
                    </select>
                </th>
            </tr>
        </thead>
        <tbody>
            <!-- 动态生成行 -->
        </tbody>
    </table>
</div>

<script>
    let allData = []; // 存储所有数据

    // 示例数据（可以替换为从后端加载的数据）
    const sampleData = [
       ["遇萤", "银临", "中文", "古风", "4000j 5R"],
        ["第二种选择", "菲菲公主", "中文", "流行", "4000j 5R","新学"],
        ["循梦", "余又", "中文", "流行", "4000j 5R"],
    ];

    // 初始化数据
    function initData() {
        allData = sampleData; // 使用示例数据
        renderTable(allData);
        updateFilters(allData); // 更新筛选框选项
    }

    // 渲染表格
    function renderTable(data) {
        const tbody = document.querySelector('#readonlyTable tbody');
        tbody.innerHTML = ''; // 清空现有数据
        data.forEach(rowData => {
            const newRow = document.createElement('tr');
            rowData.forEach(cellData => {
                const newCell = document.createElement('td');
                newCell.textContent = cellData; // 只读，不可编辑
                newRow.appendChild(newCell);
            });
            tbody.appendChild(newRow);
        });
    }

    // 更新筛选框选项
    function updateFilters(data) {
        const filters = [
            { id: 'filterCol2', columnIndex: 1 }, // 歌手
            { id: 'filterCol3', columnIndex: 2 }, // 语言
            { id: 'filterCol4', columnIndex: 3 }, // 风格
            { id: 'filterCol5', columnIndex: 4 }, // 价格
            { id: 'filterCol6', columnIndex: 5 }, // 板块
        ];

        filters.forEach(filter => {
            const select = document.getElementById(filter.id);
            const options = new Set(data.map(row => row[filter.columnIndex])); // 去重
            options.forEach(option => {
                const optionElement = document.createElement('option');
                optionElement.value = option;
                optionElement.textContent = option;
                select.appendChild(optionElement);
            });
        });
    }

    // 过滤表格数据
    function filterTable(type, columnIndex) {
        let filteredData = allData;

        // 全局搜索（第一列）
        if (type === 'search') {
            const searchText = document.getElementById('searchCol1').value.toLowerCase();
            filteredData = filteredData.filter(row => 
                row[0].toLowerCase().includes(searchText)
            );
        }

        // 按列筛选
        if (type === 'filter') {
            const filterValue = document.getElementById(`filterCol${columnIndex + 1}`).value;
            if (filterValue) {
                filteredData = filteredData.filter(row => 
                    row[columnIndex] === filterValue
                );
            }
        }

        renderTable(filteredData);
    }

    // 初始化数据
    initData();
</script>

</body>
</html>
